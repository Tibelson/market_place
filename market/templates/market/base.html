<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src = "https://cdn.tailwindcss.com"></script>
        <title>{% block title %}Welcome{% endblock %} | Campus Connect</title>
    </head>
    <body>
        <nav class="py-6 px-6 flex justify-between items-center border-b border-gray-300">

                <a href="/" class="text-xl font-semibold">Campus Connect Market</a>
                <div class="space-x-6">
                    {# Show New Item only for users who have a Vendor profile #}
                    {% if request.user.is_authenticated and request.user|default_if_none:'' and request.user.vendor %}
                        <a href="{% url 'item:new' %}" class="text-lg font-semibold hover:text-gray-500">New Item</a>
                    {% endif %}
                    {# 'Browse' link removed because it's unrouted; add routes before re-enabling #}
                    {% if request.user.is_authenticated %}
                        <a href="{% url 'messaging:chat_list' %}" class="text-lg font-semibold hover:text-gray-500 relative">
                            Inbox
                            {% if unread_message_count and unread_message_count > 0 %}
                                <span class="ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full">{{ unread_message_count }}</span>
                            {% endif %}
                        </a>
                        <a href="{% url 'market:notifications' %}" class="text-lg font-semibold hover:text-gray-500 relative">
                            Notifications
                            {% if unread_notifications_count and unread_notifications_count > 0 %}
                                <span class="ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full">{{ unread_notifications_count }}</span>
                            {% endif %}
                        </a>
                        <span class="text-sm text-gray-700">Signed in as <strong>{{ request.user.username }}</strong></span>
                        <a href="{% url 'market:logout' %}" class="px-4 py-2 text-sm font-semibold bg-gray-200 rounded-lg hover:bg-gray-300">Logout</a>
                    {% else %}
                        <a href="{% url 'market:signup' %}" class="px-6 py-3 text-lg font-semibold bg-blue-900  text-black rounded-xl hover:bg-teal-800">Sign Up</a>
                        <a href="{% url 'market:login' %}" class="px-6 py-3 text-lg font-semibold bg-grey-900  text-black rounded-xl hover:bg-teal-800">Log In</a>
                    {% endif %}
                                </div>
            
        </nav>
        <div class="px-6 py-6">
            {% block content %}
            {% endblock %}


        </div>
        <footer class="py-6 px-6 flex justify-between bg-grey-900">
            <div class="w-2/3 pr-10 ">
                <h3 class="mb-5 font-semibold text-gray-500"> About</h3>
            </div>
        </footer>    
    </body>

</html>